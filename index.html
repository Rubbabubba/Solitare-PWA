<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="theme-color" content="#0c5b2d" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <title>Solitaire</title>

  <link rel="manifest" href="manifest.webmanifest?v=1" />
  <link rel="stylesheet" href="style.css?v=1" />
</head>

<body>
  <div id="app">
    <!-- Top bar -->
    <header class="topbar">
      <button id="btnMenu" class="iconBtn" aria-label="Menu">
        â˜°
      </button>

      <div class="stats">
        <div class="stat">
          <div class="label">Score</div>
          <div id="score" class="value">0</div>
        </div>
        <div class="stat">
          <div class="label">Time</div>
          <div id="time" class="value">00:00</div>
        </div>
        <div class="stat">
          <div class="label">Moves</div>
          <div id="moves" class="value">0</div>
        </div>
      </div>

      <button id="btnRight" class="iconBtn" aria-label="Info">
        ðŸŽ®
      </button>
    </header>

    <!-- Board -->
    <main class="board" aria-label="Solitaire board">
      <!-- Top row -->
      <section class="topRow">
        <div class="zoneGroup leftGroup">
          <div class="pileWrap">
            <div class="pileLabel">Stock</div>
            <div id="stock" class="pile stock" data-pile="stock" aria-label="Stock pile">
              <div class="stockBadge" id="stockCount">24</div>
            </div>
          </div>

          <div class="pileWrap">
            <div class="pileLabel">Waste</div>
            <div id="waste" class="pile waste" data-pile="waste" aria-label="Waste pile"></div>
          </div>
        </div>

        <div class="zoneGroup rightGroup">
          <div class="pileWrap">
            <div class="pileLabel">Foundation</div>
            <div class="foundations">
              <div class="pile foundation" id="f0" data-pile="f0" aria-label="Foundation 1">
                <div class="placeholder">A</div>
              </div>
              <div class="pile foundation" id="f1" data-pile="f1" aria-label="Foundation 2">
                <div class="placeholder">A</div>
              </div>
              <div class="pile foundation" id="f2" data-pile="f2" aria-label="Foundation 3">
                <div class="placeholder">A</div>
              </div>
              <div class="pile foundation" id="f3" data-pile="f3" aria-label="Foundation 4">
                <div class="placeholder">A</div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Tableau -->
      <section class="tableau" aria-label="Tableau">
        <div class="col pile tableauCol" id="t0" data-pile="t0" aria-label="Tableau column 1"></div>
        <div class="col pile tableauCol" id="t1" data-pile="t1" aria-label="Tableau column 2"></div>
        <div class="col pile tableauCol" id="t2" data-pile="t2" aria-label="Tableau column 3"></div>
        <div class="col pile tableauCol" id="t3" data-pile="t3" aria-label="Tableau column 4"></div>
        <div class="col pile tableauCol" id="t4" data-pile="t4" aria-label="Tableau column 5"></div>
        <div class="col pile tableauCol" id="t5" data-pile="t5" aria-label="Tableau column 6"></div>
        <div class="col pile tableauCol" id="t6" data-pile="t6" aria-label="Tableau column 7"></div>
      </section>

      <!-- Drag layer -->
      <div id="dragLayer" class="dragLayer" aria-hidden="true"></div>
    </main>

    <!-- Bottom bar -->
    <footer class="bottombar">
      <button id="btnSettings" class="bottomBtn">Settings</button>
      <button id="btnNew" class="bottomBtn">New</button>
      <button id="btnHint" class="bottomBtn">Hint</button>
      <button id="btnUndo" class="bottomBtn">Undo</button>
    </footer>

    <!-- Settings modal -->
    <div id="modalBackdrop" class="backdrop hidden" role="dialog" aria-modal="true" aria-label="Settings">
      <div class="modal">
        <div class="modalHeader">
          <div class="modalTitle">Settings</div>
          <button id="btnCloseModal" class="iconBtn" aria-label="Close">âœ•</button>
        </div>

        <div class="modalBody">
          <label class="row">
            <span>Draw mode</span>
            <select id="drawMode">
              <option value="1" selected>Draw 1</option>
              <option value="3">Draw 3</option>
            </select>
          </label>

          <label class="row">
            <span>Hints</span>
            <input id="optHints" type="checkbox" checked />
          </label>

          <label class="row">
            <span>Auto-move to foundation</span>
            <input id="optAutoFoundation" type="checkbox" />
          </label>

          <label class="row">
            <span>Deck style</span>
            <select id="deckStyle">
              <option value="mlb_random" selected>MLB (Random team per card)</option>
              <option value="classic">Classic (no logo)</option>
            </select>
          </label>

          <div class="help">
            <div class="helpTitle">MLB logos</div>
            <div class="helpText">
              Add your logo images under <code>assets/mlb/</code> and list them in
              <code>assets/mlb/mlb.json</code>. The app will randomly assign a logo to each card.
            </div>
          </div>

          <button id="btnResetStats" class="dangerBtn">Clear Saved Game</button>
        </div>
      </div>
    </div>
  </div>

  <script src="app.js?v=1" defer></script>
  <script>
    // Register SW (GitHub Pages-friendly)
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('./sw.js?v=1').catch(() => {});
      });
    }
  </script>
</body>
</html>
